{
    "contents" : "---\noutput: word_document\n---\n###Simulated sampling Dynamic modeling\n\n```{r}\nlibrary(\"unmarked\")\n```\n\n#First we simulate our detection history for 30 sites with four primary sampling periods, and three secondary sampling periods each.\n```{r, echo=FALSE}\ns1.1a<-rbinom(n=10, size=1, prob=0.7)\ns1.1b<-rbinom(n=10, size=1, prob=0.4)\ns1.1c<-rbinom(n=10, size=1, prob=0.2)\ns1.2a<-rbinom(n=10, size=1, prob=0.7)\ns1.2b<-rbinom(n=10, size=1, prob=0.4)\ns1.2c<-rbinom(n=10, size=1, prob=0.2)\ns1.3a<-rbinom(n=10, size=1, prob=0.7)\ns1.3b<-rbinom(n=10, size=1, prob=0.4)\ns1.3c<-rbinom(n=10, size=1, prob=0.2)\n\ns1.1 <-c(s1.1a,s1.1b,s1.1c)\ns1.2 <-c(s1.2a,s1.2b,s1.2c)\ns1.3 <-c(s1.3a,s1.3b,s1.3c)\n\ns2.1a<-rbinom(n=10, size=1, prob=0.7)\ns2.1b<-rbinom(n=10, size=1, prob=0.4)\ns2.1c<-rbinom(n=10, size=1, prob=0.2)\ns2.2a<-rbinom(n=10, size=1, prob=0.7)\ns2.2b<-rbinom(n=10, size=1, prob=0.4)\ns2.2c<-rbinom(n=10, size=1, prob=0.2)\ns2.3a<-rbinom(n=10, size=1, prob=0.7)\ns2.3b<-rbinom(n=10, size=1, prob=0.4)\ns2.3c<-rbinom(n=10, size=1, prob=0.2)\n\ns2.1 <-c(s2.1a,s2.1b,s2.1c)\ns2.2 <-c(s2.2a,s2.2b,s2.2c)\ns2.3 <-c(s2.3a,s2.3b,s2.3c)\n\ns3.1a<-rbinom(n=10, size=1, prob=0.9)\ns3.1b<-rbinom(n=10, size=1, prob=0.4)\ns3.1c<-rbinom(n=10, size=1, prob=0.1)\ns3.2a<-rbinom(n=10, size=1, prob=0.9)\ns3.2b<-rbinom(n=10, size=1, prob=0.4)\ns3.2c<-rbinom(n=10, size=1, prob=0.2)\ns3.3a<-rbinom(n=10, size=1, prob=0.9)\ns3.3b<-rbinom(n=10, size=1, prob=0.4)\ns3.3c<-rbinom(n=10, size=1, prob=0.1)\n\ns3.1 <-c(s3.1a,s3.1b,s3.1c)\ns3.2 <-c(s3.2a,s3.2b,s3.2c)\ns3.3 <-c(s3.3a,s3.3b,s3.3c)\n\ns4.1a<-rbinom(n=10, size=1, prob=0.9)\ns4.1b<-rbinom(n=10, size=1, prob=0.4)\ns4.1c<-rbinom(n=10, size=1, prob=0.1)\ns4.2a<-rbinom(n=10, size=1, prob=0.9)\ns4.2b<-rbinom(n=10, size=1, prob=0.4)\ns4.2c<-rbinom(n=10, size=1, prob=0.1)\ns4.3a<-rbinom(n=10, size=1, prob=0.9)\ns4.3b<-rbinom(n=10, size=1, prob=0.4)\ns4.3c<-rbinom(n=10, size=1, prob=0.1)\n\ns4.1 <-c(s4.1a,s4.1b,s4.1c)\ns4.2 <-c(s4.2a,s4.2b,s4.2c)\ns4.3 <-c(s4.3a,s4.3b,s4.3c)\nsampling.ocup<- cbind(s1.1,s1.2,s1.3,s2.1,s2.2,s2.3,s3.1,s3.2,s3.3,s4.1,s4.2,s4.3)\n```\n\n```{r}\nView(sampling.ocup)\n```\nThis simulated data has some underlying charachteristics:\n\n**environment a (top 10 rows, the best environment for bats, also occupancy increases with time)**\n```{r}\nmean(sampling.ocup[1:10])\n```\n**environment b (rows 11 to 20, medium environment, occupancy stays the same)**\n```{r}\nmean(sampling.ocup[11:20])\n```\n**environment c (rows 21 to 30) poor environment for bats, also there is extintion)**\n```{r}\nmean(sampling.ocup[21:30])\n```\n\nNow we will simulate some variables for the site covariates.\n#Site cov static\n**the more variable 1, the better for bats**\n\n```{r, echo=FALSE}\nv.1a<-rnorm(n=10, mean=20, sd=0.7)\nv.1b<-rnorm(n=10, mean=10, sd=0.7)\nv.1c<-rnorm(n=10, mean=5, sd=0.7)\n\nv.1 <-c(v.1a,v.1b,v.1c)\n```\n\n```{r}\nmean(v.1[1:10])\nmean(v.1[11:20])\nmean(v.1[21:30])\n```\n\n\n#the less variable 2 better for bats\n```{r,echo=FALSE}\nv.2a<-rnorm(n=10, mean=20, sd=0.7)\nv.2b<-rnorm(n=10, mean=40, sd=0.7)\nv.2c<-rnorm(n=10, mean=60, sd=0.7)\n\nv.2 <-c(v.2a,v.2b,v.2c)\n```\n\n```{r}\nmean(v.2[1:10])\nmean(v.2[11:20])\nmean(v.2[21:30])\n```\n\n#variable 3 does not mater to bats\n\n```{r,echo=FALSE}\nv.3a<-rnorm(n=10, mean=20, sd=0.7)\nv.3b<-rnorm(n=10, mean=20, sd=0.7)\nv.3c<-rnorm(n=10, mean=20, sd=0.7)\n\n\nv.3 <-c(v.3a,v.3b,v.3c)\n```\n\n```{r}\nmean(v.3[1:10])\nmean(v.3[11:20])\nmean(v.3[21:30])\n```\n\n```{r}\nsampling.cov<- cbind(v.1,v.2, v.3)\n```\n#yearly colonization extintion variable\n\n```{r}\ntemp1<-rnorm(n=30, mean=20, sd=10)\ntemp2<-rnorm(n=30, mean=40, sd=10)\ntemp3<-rnorm(n=30, mean=50, sd=10)\ntemp4<-rnorm(n=30, mean=60, sd=10)\n\n\ntemps <-cbind(temp1,temp2, temp3, temp4)\n```\n#observer within secondary it could be variable\n\n\n#observers dont vary in the model, they should all be the same\n\n```{r}\nobs1<-rnorm(n=30, mean=40, sd=0.7)\nobs2<-rnorm(n=30, mean=40, sd=0.7)\nobs3<-rnorm(n=30, mean=40, sd=0.7)\nobs4<-rnorm(n=30, mean=40, sd=0.7)\nobs5<-rnorm(n=30, mean=40, sd=0.7)\nobs6<-rnorm(n=30, mean=40, sd=0.7)\nobs7<-rnorm(n=30, mean=40, sd=0.7)\nobs8<-rnorm(n=30, mean=40, sd=0.7)\nobs9<-rnorm(n=30, mean=40, sd=0.7)\nobs10<-rnorm(n=30, mean=40, sd=0.7)\nobs11<-rnorm(n=30, mean=40, sd=0.7)\nobs12<-rnorm(n=30, mean=40, sd=0.7)\n\nobservers1<-data.frame(cbind(obs1,obs2,obs3, obs4, obs5, obs6, obs7, obs8, obs9, obs10, obs11, obs12))\n\nobservers2<-data.frame(cbind(obs1,obs2,obs3, obs4, obs5, obs6, obs7, obs8, obs9, obs10, obs11, obs12))\n\nobservers<-list(observers1, observers2)\nnames(observers) <-c(\"obs1\", \"obs2\")\n```\n#primary model\n```{r}\numf <- unmarkedMultFrame(y = sampling.ocup, \n                            siteCovs = data.frame(sampling.cov), \n                            yearlySiteCovs=data.frame(temps),\n                            obsCovs=observers, numPrimary=3)\n```\n#Dynamic model\n#first term static variables\n#second term colonization (variable)\n#third extintion (variable)\n#detection (observer)\n#the best model should take into acount v.1 and v.2, but not v.3, it shouldn't take into acount observers\n\n```{r}\nmodel1 <- colext(~v.1+v.2+v.3, ~temp1, ~temp1, ~obs1+obs2, umf)\n\nmodel2 <- colext(~1, ~1, ~1, ~1, umf)\n\nmodel3 <- colext(~v.1+v.2, ~temp1, ~temp1, ~1, umf) #this should be the best model\nmodel4 <-colext(~v.1+v.2, ~1, ~1, ~1, umf)\n```\n#graph\n",
    "created" : 1430793734725.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "3953842338",
    "id" : "A9C664CE",
    "lastKnownWriteTime" : 1430793618,
    "path" : "C:/Users/usuario/Bats_California/Rbats/dynamic sampling.Rmd",
    "project_path" : "dynamic sampling.Rmd",
    "properties" : {
    },
    "source_on_save" : false,
    "type" : "r_markdown"
}